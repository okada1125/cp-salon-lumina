# Cloud Run ソースからデプロイ - 実際の手順

## 現在の画面

画像を見ると、「**既存のコンテナイメージから 1 つのリビジョンをデプロイする**」が選択されています。

これは **まだイメージがない** このプロジェクトには適していません。

## 正しい方法

左上のタブで **「ソースから直接デプロイ」** を選択してください。

## 手順

### 1. デプロイ方法の切り替え

画面上部のタブで：

現在：`既存のコンテナイメージから` ← これではなく
次：`ソースから直接デプロイ` ← これを選択

### 2. リポジトリを接続

「リポジトリを接続」ボタンをクリック

- 初回の場合：GitHub で認証
- リポジトリを選択：`okada1125/cp-salon-lumina`
- ブランチ：`main`
- 「次へ」をクリック

### 3. ビルド設定

**ビルドタイプ**: Dockerfile（デフォルト）
**場所**: Dockerfile（デフォルト）

このままで OK！

### 4. 環境変数を設定

以下の環境変数を追加：

1. `DATABASE_URL` = `mysql://root:KvRPDbd>\m.L}701@35.221.114.163:3306/line_contact_form`
2. `LINE_CHANNEL_SECRET` = `9239b0c9a368bbc48b4c6601201a00aa`
3. `LIFF_ID` = `2008317301-ANXP8KZG`
4. `LINE_CHANNEL_ACCESS_TOKEN` = `9239b0c9a368bbc48b4c6601201a00aa`

### 5. サービス名

- サービス名: `line-contact-form`

### 6. 認証設定

- **未認証の呼び出しを許可** にチェック

### 7. デプロイ

「作成」または「デプロイ」をクリック

## まとめ

| 項目                           | 説明                                                        |
| ------------------------------ | ----------------------------------------------------------- |
| **既存のコンテナイメージから** | すでにビルド済みのイメージを使う（これは使わない）          |
| **ソースから直接デプロイ**     | GitHub から Dockerfile を読み取って自動ビルド（これを選択） |

## 違い

**既存のコンテナイメージから**:

- イメージ URL を入力する必要がある
- そのイメージをどこかに保存しておく必要がある
- 例：`gcr.io/project-id/my-image:latest`

**ソースから直接デプロイ**:

- GitHub から直接デプロイ
- Cloud Run が自動的にイメージを作成
- Dockerfile を見つけて自動ビルド
- イメージは Artifact Registry に自動保存される

今必要なのは「**ソースから直接デプロイ**」です！
