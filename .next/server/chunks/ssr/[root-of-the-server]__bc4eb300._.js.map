{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/jun/cp-salon-lumina/src/components/ContactForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\ninterface ContactFormProps {\n  lineUserId: string;\n}\n\ninterface FormData {\n  kanjiName: string;\n  katakanaName: string;\n  phoneNumber: string;\n  referrer: string;\n}\n\nexport default function ContactForm({ lineUserId }: ContactFormProps) {\n  const [formData, setFormData] = useState<FormData>({\n    kanjiName: \"\",\n    katakanaName: \"\",\n    phoneNumber: \"\",\n    referrer: \"\",\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitStatus, setSubmitStatus] = useState<\n    \"idle\" | \"success\" | \"error\"\n  >(\"idle\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setSubmitStatus(\"idle\");\n    setErrorMessage(\"\");\n\n    try {\n      const response = await fetch(\"/api/contact\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          ...formData,\n          lineUserId,\n        }),\n      });\n\n      if (response.ok) {\n        setSubmitStatus(\"success\");\n        setFormData({\n          kanjiName: \"\",\n          katakanaName: \"\",\n          phoneNumber: \"\",\n          referrer: \"\",\n        });\n      } else {\n        const errorData = await response.json();\n        setSubmitStatus(\"error\");\n        setErrorMessage(errorData.message || \"送信に失敗しました\");\n      }\n    } catch (error) {\n      console.error(\"送信エラー:\", error);\n      setSubmitStatus(\"error\");\n      setErrorMessage(\"ネットワークエラーが発生しました\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (submitStatus === \"success\") {\n    return (\n      <div className=\"text-center py-8\">\n        <div className=\"mb-4\">\n          <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100\">\n            <svg\n              className=\"h-6 w-6 text-green-600\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M5 13l4 4L19 7\"\n              ></path>\n            </svg>\n          </div>\n        </div>\n        <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\n          登録が完了しました。\n        </h2>\n      </div>\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      <div>\n        <label\n          htmlFor=\"kanjiName\"\n          className=\"block text-sm font-medium text-gray-700 mb-2\"\n        >\n          名前（漢字） <span className=\"text-red-500\">*</span>\n        </label>\n        <input\n          type=\"text\"\n          id=\"kanjiName\"\n          name=\"kanjiName\"\n          value={formData.kanjiName}\n          onChange={handleInputChange}\n          required\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          placeholder=\"山田 太郎\"\n        />\n      </div>\n\n      <div>\n        <label\n          htmlFor=\"katakanaName\"\n          className=\"block text-sm font-medium text-gray-700 mb-2\"\n        >\n          ナマエ（カタカナ） <span className=\"text-red-500\">*</span>\n        </label>\n        <input\n          type=\"text\"\n          id=\"katakanaName\"\n          name=\"katakanaName\"\n          value={formData.katakanaName}\n          onChange={handleInputChange}\n          required\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          placeholder=\"ヤマダ タロウ\"\n        />\n      </div>\n\n      <div>\n        <label\n          htmlFor=\"phoneNumber\"\n          className=\"block text-sm font-medium text-gray-700 mb-2\"\n        >\n          電話番号 <span className=\"text-red-500\">*</span>\n        </label>\n        <input\n          type=\"tel\"\n          id=\"phoneNumber\"\n          name=\"phoneNumber\"\n          value={formData.phoneNumber}\n          onChange={handleInputChange}\n          required\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          placeholder=\"090-1234-5678\"\n        />\n      </div>\n\n      <div>\n        <label\n          htmlFor=\"referrer\"\n          className=\"block text-sm font-medium text-gray-700 mb-2\"\n        >\n          紹介者（任意）\n        </label>\n        <input\n          type=\"text\"\n          id=\"referrer\"\n          name=\"referrer\"\n          value={formData.referrer}\n          onChange={handleInputChange}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          placeholder=\"紹介者の名前\"\n        />\n      </div>\n\n      {submitStatus === \"error\" && (\n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n          <p className=\"text-red-600 text-sm\">{errorMessage}</p>\n        </div>\n      )}\n\n      <button\n        type=\"submit\"\n        disabled={isSubmitting}\n        className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {isSubmitting ? \"送信中...\" : \"送信する\"}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///Users/jun/cp-salon-lumina/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport ContactForm from \"@/components/ContactForm\";\n\ninterface LineProfile {\n  userId: string;\n  displayName: string;\n  pictureUrl?: string;\n  statusMessage?: string;\n}\n\nexport default function Home() {\n  const [lineProfile, setLineProfile] = useState<LineProfile | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isLiffAvailable, setIsLiffAvailable] = useState(false);\n\n  useEffect(() => {\n    const initializeLiff = async () => {\n      try {\n        // LIFF SDKの読み込みを待つ\n        let liffCheckCount = 0;\n        while (!(window as { liff?: unknown }).liff && liffCheckCount < 50) {\n          await new Promise((resolve) => setTimeout(resolve, 100));\n          liffCheckCount++;\n        }\n\n        // LIFFが利用可能かチェック\n        if ((window as { liff?: unknown }).liff) {\n          const liff = (window as { liff: unknown }).liff as {\n            init: (config: { liffId: string }) => Promise<void>;\n            isLoggedIn: () => boolean;\n            getProfile: () => Promise<LineProfile>;\n            login: () => void;\n          };\n          setIsLiffAvailable(true);\n\n          console.log(\"LIFF SDKが見つかりました。初期化を開始します...\");\n\n          // localhost の場合は LINE ログインをスキップ（LIFF は Cloud Run URL にリダイレクトするため）\n          const isLocalhost =\n            typeof window !== \"undefined\" &&\n            /^https?:\\/\\/localhost(:\\d+)?(\\/|$)/.test(\n              window.location.origin\n            );\n          if (isLocalhost) {\n            console.log(\"localhost のため、モックプロファイルで表示\");\n            setLineProfile({\n              userId: \"local-dev-\" + Date.now(),\n              displayName: \"ローカル確認用\",\n            });\n          } else {\n            // LIFFを初期化\n            await liff.init({ liffId: \"2008317301-ANXP8KZG\" });\n\n            console.log(\"LIFF初期化成功\");\n\n            if (liff.isLoggedIn()) {\n              console.log(\"LINEログイン済みです\");\n              const profile = await liff.getProfile();\n              console.log(\"プロファイル取得成功:\", profile);\n              setLineProfile(profile);\n            } else {\n              console.log(\"LINE未ログインのため、ログイン画面にリダイレクト\");\n              liff.login();\n              return; // ログイン中は処理を終了\n            }\n          }\n        } else {\n          // LIFFが利用できない場合（PCブラウザアクセスなど）\n          console.log(\"LIFF SDKが見つかりません。PCブラウザアクセスです。\");\n          setLineProfile({\n            userId: \"pc-user-\" + Date.now(),\n            displayName: \"PCユーザー\",\n          });\n        }\n      } catch (error) {\n        console.error(\"LIFF初期化エラー:\", error);\n        setLineProfile({\n          userId: \"pc-user-\" + Date.now(),\n          displayName: \"PCユーザー\",\n        });\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    initializeLiff();\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">読み込み中...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!lineProfile) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-600\">LINEログインが必要です</p>\n          <p className=\"text-sm text-gray-500 mt-2\">\n            LINEアプリからアクセスしてください\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <h1 className=\"text-2xl font-bold text-gray-800 mb-6 text-center\">\n              連携登録フォーム\n            </h1>\n\n            {isLiffAvailable && lineProfile && (\n              <div className=\"mb-6 p-4 bg-blue-50 rounded-lg\">\n                <p className=\"text-sm text-blue-700\">\n                  LINEアカウント: {lineProfile.displayName}\n                </p>\n              </div>\n            )}\n\n            <ContactForm lineUserId={lineProfile.userId} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAYe,SAAS;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAqB;IACnE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,IAAA,kNAAS,EAAC;QACR,MAAM,iBAAiB;YACrB,IAAI;gBACF,mBAAmB;gBACnB,IAAI,iBAAiB;gBACrB,MAAO,CAAC,AAAC,OAA8B,IAAI,IAAI,iBAAiB,GAAI;oBAClE,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;oBACnD;gBACF;gBAEA,iBAAiB;gBACjB,IAAI,AAAC,OAA8B,IAAI,EAAE;oBACvC,MAAM,OAAO,AAAC,OAA6B,IAAI;oBAM/C,mBAAmB;oBAEnB,QAAQ,GAAG,CAAC;oBAEZ,kEAAkE;oBAClE,MAAM,cACJ,gBAAkB,eAClB,qCAAqC,IAAI,CACvC,OAAO,QAAQ,CAAC,MAAM;oBAE1B;;yBAMO;wBACL,WAAW;wBACX,MAAM,KAAK,IAAI,CAAC;4BAAE,QAAQ;wBAAsB;wBAEhD,QAAQ,GAAG,CAAC;wBAEZ,IAAI,KAAK,UAAU,IAAI;4BACrB,QAAQ,GAAG,CAAC;4BACZ,MAAM,UAAU,MAAM,KAAK,UAAU;4BACrC,QAAQ,GAAG,CAAC,eAAe;4BAC3B,eAAe;wBACjB,OAAO;4BACL,QAAQ,GAAG,CAAC;4BACZ,KAAK,KAAK;4BACV,QAAQ,cAAc;wBACxB;oBACF;gBACF,OAAO;oBACL,8BAA8B;oBAC9B,QAAQ,GAAG,CAAC;oBACZ,eAAe;wBACb,QAAQ,aAAa,KAAK,GAAG;wBAC7B,aAAa;oBACf;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,eAAe;gBAC7B,eAAe;oBACb,QAAQ,aAAa,KAAK,GAAG;oBAC7B,aAAa;gBACf;YACF,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG,EAAE;IAEL,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,IAAI,CAAC,aAAa;QAChB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAgB;;;;;;kCAC7B,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;;;;;;IAMlD;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAoD;;;;;;wBAIjE,mBAAmB,6BAClB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAE,WAAU;;oCAAwB;oCACvB,YAAY,WAAW;;;;;;;;;;;;sCAKzC,8OAAC,4IAAW;4BAAC,YAAY,YAAY,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvD","debugId":null}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///Users/jun/cp-salon-lumina/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":["file:///Users/jun/cp-salon-lumina/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 548, "column": 0}, "map": {"version":3,"sources":["file:///Users/jun/cp-salon-lumina/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}